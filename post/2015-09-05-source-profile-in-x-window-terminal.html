<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="박연오의 개인 웹 페이지. 컴퓨터 프로그래밍 등."><title>.profile에 설정한 내용이 터미널 에뮬레이터에서 안 먹힐 때 | 박연오</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/very-simple.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><!-- include the sidebar--><!-- include ./includes/sidebar.jade--><!-- Blog title and subtitle--><header><div class="container header"><a id="logo" href="/." class="title">박연오</a><span class="subtitle">bakyeono.net</span><label id="toggle-menu" for="menu" onclick><i class="fa fa-bars"></i></label></div></header><!-- use checkbox hack for toggle nav-bar on small screens--><input id="menu" type="checkbox"><!-- Navigation Links--><nav id="nav"><div class="container"><a href="/" class="sidebar-nav-item active">home</a><a href="/archive" class="sidebar-nav-item">archive</a></div></nav><div id="header-margin-bar"></div><!-- gallery that comes before the header--><div class="wrapper"><div class="container post-header"><h1>.profile에 설정한 내용이 터미널 에뮬레이터에서 안 먹힐 때</h1></div></div><div class="wrapper"><div class="container meta"><div class="post-time">2015-09-05</div><div class="post-tags"><a class="post-tag-link" href="/tag/bash/">bash</a>/<a class="post-tag-link" href="/tag/linux/">linux</a>/<a class="post-tag-link" href="/tag/x-window/">x-window</a></div></div></div><article><div class="container post"><p>내가 겪은 문제다. X-윈도우에서 터미널 에뮬레이터(XTERM, Terminator, GNOME Terminal 등)를 사용할 때 <code>~/.profile</code>, <code>~/.bash_profile</code> 같은 사용자 쉘 설정 파일이 적용되지 않는 것이다. <code>PATH</code> 환경변수 설정이 내 뜻대로 되지 않아서 매우 답답했다.</p>
<p>더 당혹스러운 것은 X-윈도우가 아닌 CUI 모드[^1]나 SSH에서는 쉘 설정이 로드되는 것이다. 왜 그때그때 동작이 다른 것일까?</p>
<p>알고 보면 별 거 아니지만 누군가 나처럼 삽질을 경험할 수 있으니 원인과 해결방법을 남겨둔다.</p>
<h2 id="원인"><a href="#원인" class="headerlink" title="원인"></a>원인</h2><p>이 문제는 <code>~/.profile</code>, <code>~/.bash_profile</code>, <code>~/.bashrc</code> 파일의 용도가 다르기 때문에 발생한다.</p>
<ul>
<li><code>~/.profile</code>, <code>~/.bash_profile</code>은 세션에 로그인할 때 로드된다.</li>
<li><code>~/.bashrc</code>는 bash가 실행될 때 로드된다.</li>
</ul>
<p>X-윈도우에서 터미널 에뮬레이터를 실행하면 X-윈도우의 현재 세션을 유지할 뿐 별도로 로그인 과정을 거치지 않는다. 그래서 에뮬레이터에서는 <code>~/.bashrc</code>만이 로드되는 것이다.</p>
<h2 id="해결방법"><a href="#해결방법" class="headerlink" title="해결방법"></a>해결방법</h2><h3 id="방법-1-그냥-bashrc에-설정-넣기"><a href="#방법-1-그냥-bashrc에-설정-넣기" class="headerlink" title="방법 1: 그냥 .bashrc에 설정 넣기"></a>방법 1: 그냥 .bashrc에 설정 넣기</h3><p>설정할 내용을 <code>~/.profile</code> 또는 <code>~/.bash_profile</code> 말고, 그냥 <code>~/.bashrc</code>에 넣는다.</p>
<h3 id="방법-2-bashrc가-세션-설정-파일을-로드하도록-하기"><a href="#방법-2-bashrc가-세션-설정-파일을-로드하도록-하기" class="headerlink" title="방법 2: .bashrc가 세션 설정 파일을 로드하도록 하기"></a>방법 2: .bashrc가 세션 설정 파일을 로드하도록 하기</h3><p><code>~/.bashrc</code>에 <code>~/.profile</code> 또는 <code>~/.bash_profile</code>을 로드하도록 하는 명령을 추가한다.</p>
<blockquote>
<p>주의: <code>~/.profile</code> 또는 <code>~/.bash_profile</code>이 <code>~/.bashrc</code>를 로드하도록 설정되어 있을 가능성이 높다. 이렇게 되면 순환 재귀가 발생하여 bash를 쓸 수 없게 된다. [ctrl] + [c]를 누르면 순환 재귀가 취소되긴 한다.</p>
</blockquote>
<h3 id="방법-3-추천-에뮬레이터로-로그인-쉘-사용"><a href="#방법-3-추천-에뮬레이터로-로그인-쉘-사용" class="headerlink" title="방법 3 (추천): 에뮬레이터로 로그인 쉘 사용"></a>방법 3 (추천): 에뮬레이터로 로그인 쉘 사용</h3><p>터미널 에뮬레이터의 환경 설정에서 쉘을 로그인 상태로 시작하도록 하는 옵션을 켠다.</p>
<p>SSH 같은 별도 세션과 터미널 에뮬레이터의 동작이 달랐던 원인이 바로 이거다. 터미널 에뮬레이터를 별도의 로그인 세션으로 동작하게 하는 방법이다. 이 방법이 제일 무난한 것 같다.</p>
<h2 id="참고-문서"><a href="#참고-문서" class="headerlink" title="참고 문서"></a>참고 문서</h2><ul>
<li><a href="http://askubuntu.com/questions/121073/why-bash-profile-is-not-getting-sourced-when-opening-a-terminal" target="_blank" rel="external">ask ubuntu 121073번 글</a></li>
<li><a href="http://stackoverflow.com/questions/415403/whats-the-difference-between-bashrc-bash-profile-and-environment" target="_blank" rel="external">stack overflow 415403번 글</a></li>
</ul>
<p>[^1]: [ctrl] + [alt] + [1]-[6]</p>
</div><!-- comment system--><div class="container"><hr></div></article><footer id="footer"><div class="container"><div class="bar"><div class="social"><a href="mailto:bakyeono@gmail.com" target="_blank"><i class="fa fa-envelope-o"></i></a><a href="https://github.com/bakyeono" target="_blank"><i class="fa fa-github"></i></a><a href="http://feeds.feedburner.com/bakyeono" target="_blank"><i class="fa fa-rss"></i></a></div><div class="footer">© 2016 <a href="/" rel="nofollow">박연오</a>. Powered by <a rel="nofollow" target="_blank" href="https://hexo.io">Hexo</a>. Theme <a target="_blank" href="https://github.com/lotabout/very-simple">very-simple</a>.</div></div></div></footer><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
    $(".fancybox").fancybox();
});</script></body></html>