---
layout: post
title: 베이 트레일 노트북(타블렛)에 리눅스 설치하기
author: 박연오(bakyeono@gmail.com)
date: 2016-04-23 21:49 +0900
tags: 리눅스
---
* table of contents
{:toc}

베이 트레일을 달고 나온 가볍고 저렴한 노트북(타블렛)이 많다. 성능은 좀 떨어지지만, 사무용으로 쓰기엔 문제 없다. 대부분 윈도우 10이 설치된 상태로 판매되고 있고 윈도우 10과 호환도 좋다. 하지만 개발자라면 여기에 리눅스 데스크탑 환경을 올려서 휴대용 개발 노트북을 만들어보고 싶을 것이다.

그런데 안타깝게도 현재 기준으로는 베이 트레일 노트북을 완전히 지원하는 리눅스 배포판은 없는 듯하다. 우분투 16.04 LTS가 베이 트레일을 제대로 지원해주지 않을까 기대했는데 그러지 못했다. 베이 트레일과 베이 트레일 노트북에 탑재된 하드웨어들이 대부분 리눅스용 드라이버를 제공하지 않는 데다 해커들의 관심도 많이 받지 못해 리눅스 지원이 미비하다.

인터넷에 공유되어 있는 여러 선배들의 노하우를 보고 여러 번 시도한 끝에 마침내 리눅스를 올리는 데 성공했다.


## 리눅스를 올릴 수 있는 장치

내가 리눅스를 올리는 데 성공한 베이 트레일 장치는 다음 두 가지다.

* 정현씨앤씨 NEXTBOOK W11S (YIFANG NXW116QC264)
* 아이뮤즈 Converter9

베이 트레일을 달고 나온 모델이 다양해서 아마 이 글을 보고 있는 사람이 사용하는 장비와 같지 않을 것이다. 하지만 다른 장치에 성공한 사례도 많이 찾아볼 수 있고 베이 트레일을 달고 나온 장치들은 다른 모듈들도 대부분 비슷비슷한 걸 쓰고 있으므로 내가 한 방법으로 다른 사람들도 성공할 수 있을 것 같다. 물론 잘못되었을 때 책임은 내가 지지 않으니 신중히 판단하고 조사해 본 후 작업하기 바란다. (면책사항)

시간이 지나면 리눅스 커뮤니티가 베이 트레일도 완벽하게 지원하는 날이 올 것이다. 따라서 빨리 리눅스를 써야만 하는 게 아니라면 더 기다려 보는 것도 좋은 방법이다.


## 대표적인 문제점과 해결책

### 32비트 UEFI

베이 트레일은 64비트 cpu이지만 UEFI는 32비트 소프트웨어를 사용하도록 되어 있다. 그래서 32비트 UEFI 부팅을 지원하는 리눅스 배포판이 필요하다. 문제는 그런 배포판이 데비안 정도밖에 없다는 것이다. 우분투는 64비트 버전만 UEFI 부팅을 지원하고 있다. 하지만 64비트 우분투 이미지에 32비트 UEFI를 지원하도록 하는 파일이 공개돼 있어 그걸 이용하면 된다.

### 부팅 스플래시 화면 지원 문제

부팅 스플래시 화면을 출력할 수 있는 비디오 모드가 지원되지 않아 부팅을 할 수 없는 경우가 있다. GRUB 부팅 옵션에서 `silent splash` 옵션을 끄고 `nomodeset` 옵션을 주면 스플래시 화면을 생략하고 부팅할 수 있다.

### 각종 모듈의 드라이버 문제

무선 네트워크, 터치 스크린, 사운드, 중력 센서, 인텔 그래픽 등 여러 가지 하드웨어 드라이버가 제대로 잡히지 않는다. 이건 장비마다 제각각이라 운이 좋으면 리눅스 커널과 호환이 잘 될 수도 있겠지만 대부분 아직 지원 안 되는 게 더 많다. 특히 무선 네트워크를 잡지 못하면 따로 유선 네트워크 연결을 하지 않는 한 다른 드라이버를 수동 설치하는 것도 힘들 것이다.


## 베이 트레일을 위한 배포판

베이 트레일에 설치하는 걸 염두에 두고 제작된 배포판이 두 가지 있다. 32비트 UEFI 부팅을 지원하는 데다 무선 네트워크, 터치 스크린 같은 필수적인 하드웨어 드라이버를 잡아 준다.

### Ubuntu 14.04.3 amd64 by Linuxium

내가 유일하게 (사용이 가능한 수준으로) 설치에 성공한 배포판이다. 아래 주소에서 다운로드할 수 있다.

<https://plus.google.com/+IanMORRISON/posts/UNWdwRMqy3j>

### Fedlet

베타 버전이어서 완성도가 낮다. 아래 주소에서 다운로드할 수 있다.

<https://www.happyassassin.net/fedlet-a-fedora-remix-for-bay-trail-tablets>


## Ubuntu 14.04.3 설치 과정

### 우분투 설치

먼저 베이 트레일 장치의 자료와 시스템 등을 백업한다.

위에 소개한 Ubuntu 14.04.3 Linuxium 버전을 다운로드하여 USB 저장장치에 플래시한다. 윈도우 환경이라면 rufus 유틸리티를 추천한다.

USB 저장장치를 베이 트레일 장치에 연결하고 BIOS 메뉴를 통해 우분투 이미지로 부팅한다.

GRUB 부팅 메뉴에서 `Install Ubuntu` 메뉴에 커서를 둔 후 `e` 키를 눌러 실행 옵션 편집기 모드로 들어간 후 `quiet splash`를 `nomodeset`으로 변경하고 `F10`키로 부팅한다.

우분투 설치를 진행할 때 웬만하면 Guided - Use entire disk 옵션으로 파티션을 설정하도록 한다. 그러면 필요한 efi 파티션을 만들어주고 grub도 맞게 설치해 준다. (단, 32비트 grub를 나중에 설치해 줘야 한다.)

그 외에는 일반적인 우분투 설치 과정에 따라 설치를 진행하면 된다.

### GRUB 설치

우분투 설치를 다 했으면 시스템을 재시작할 때 USB 저장장치를 뽑지 말고, 그대로 연결한 상태에서 다시 USB 저장장치로 부팅한다. GRUB 부팅 메뉴가 나오면, 이번에는 `c` 키를 눌러 GRUB CLI 모드로 진입하고 아래 명령어를 입력해 부팅하도록 한다.

    grub> linux (hd1,gpt2)/boot/vmlinuz-3.16.0-45-generic root=/dev/mmcblk0p2 nomodeset --
    grub> initrd (hd1,gpt2)/boot/initrd.img-3.16.0-45-generic
    grub> boot

이렇게 하면 설치된 우분투 시스템으로 부팅이 된다. 단, 이 때 `(hd1,gpt2)`, `mmcblk0p2` 와 같은 파티션 지정은 장치 구성과 파티션 설정에 따라 다를 수 있으므로 자기 시스템에 맞게 지정해야 한다. `Tab` 키로 자동 완성이 되므로 잘 찾아봐도 되고, 아니면 우분투 이미지로 부팅한 후 gparted 같은 유틸리티로 확인해도 된다.

우분투 시스템에 부팅한 후 아래 명령으로 32비트 EFI 프로그램을 설치한다.

    $ sudo apt-get update
    $ sudo apt-get install grub-efi-ia32 grub-efi-ia32-bin

GRUB 설정도 조금 고쳐야 한다. 편집기로 /etc/default/grub 파일을 열고,

    $ sudo vi /etc/default/grub

`GRUB_CMDLINE_LINUX_DEFAULT="quiet splash"` 옵션을 `quiet splash` 대신 `nomodeset` 으로 변경한다. 그 후 변경사항이 적용되도록 아래 명령을 실핸한다.

    $ sudo update-grub

이제 시스템을 재시작 해 보면 USB 저장장치 없이도 우분투 부팅이 잘 될 것이다.

### 그 외 설정 사항

만일 BIOS 부팅 메뉴에서 `ubuntu`가 여러 개 생겨 보기 싫다면, `efibootmgr` 프로그램으로 제거할 수 있다.

인텔 그래픽 드라이버가 제대로 지원되지 않으므로 우분투 GUI 가 매우 느리게 동작할 것이다. xfce를 설치해 사용하는 것을 권장한다.

커널 업데이트는 성공하지 못했다.

나머지 하드웨어 드라이버는 차차 설치해 볼 계획이다.


## 결론

### 지원 되는 것

* 무선 네트워크
* 터치 스크린
* 터치패드
* USB 포트
* 도킹 키보드

### 지원 안 되는 것

* 사운드
* 인텔 그래픽 가속
* 카메라
* 배터리 잔량 인식
* 중력 센서
* 마이크
* 화면 밝기 조절


불완전하지만 멀티미디어 용도로 쓰지 않는다면 휴대용 리눅스 머신으로는 나쁘지 않다. 하루 빨리 완벽한 지원이 이뤄지길 기대해본다.


## 참고문서

* [Installing Ubuntu 15.04 on BayTrail tablets](https://sturmflut.github.io/linux/ubuntu/2015/01/21/installing-ubuntu-15.04-on-baytrail-tablets): 가장 큰 도움이 된 글이다.

