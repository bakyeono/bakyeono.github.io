<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>박연오</title>
    <description>Workers of the world, unite!</description>
    <link>http://bakyeono.net/</link>
    <atom:link href="http://bakyeono.net/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Mon, 01 Jun 2015 11:13:49 +0900</pubDate>
    <lastBuildDate>Mon, 01 Jun 2015 11:13:49 +0900</lastBuildDate>
    <generator>Jekyll v2.5.3</generator>
    
      <item>
        <title>xmllint --xpath 로 XML 문서 파싱하기</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#xmllint-&quot; id=&quot;markdown-toc-xmllint-&quot;&gt;xmllint 사용법&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#section&quot; id=&quot;markdown-toc-section&quot;&gt;설치&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#section-1&quot; id=&quot;markdown-toc-section-1&quot;&gt;사용&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#xpath-xml-path-language&quot; id=&quot;markdown-toc-xpath-xml-path-language&quot;&gt;XPath (XML Path Language)&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#section-2&quot; id=&quot;markdown-toc-section-2&quot;&gt;몇 가지 기능&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#section-3&quot; id=&quot;markdown-toc-section-3&quot;&gt;예제&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;libxml2&lt;/code&gt; 패키지에 포함된 &lt;code&gt;xmllint&lt;/code&gt;를 이용하면 리눅스 커맨드라인에서 XML 문서를 쉽게 파싱할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;xmllint-&quot;&gt;xmllint 사용법&lt;/h2&gt;

&lt;h3 id=&quot;section&quot;&gt;설치&lt;/h3&gt;

&lt;p&gt;apt&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apt-get install libxml2-utils
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;yum&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo yum install libxml2
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;section-1&quot;&gt;사용&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;$ xmllint --xpath &#39;XPath표현식&#39; 파일경로
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;XPath표현식이 무엇인지 모른다면 아래 내용을 읽어보라.&lt;/p&gt;

&lt;h2 id=&quot;xpath-xml-path-language&quot;&gt;XPath (XML Path Language)&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://ko.wikipedia.org/wiki/XPath&quot;&gt;위키백과의 설명&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.w3.org/TR/xpath&quot;&gt;W3C 공식 문서&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;공식 문서는 조금 복잡하지만 XML 문서에서 필요한 정보를 읽어오는 데는 몇 가지만 알면 된다.&lt;/p&gt;

&lt;h3 id=&quot;section-2&quot;&gt;몇 가지 기능&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;기능&lt;/th&gt;
      &lt;th&gt;표현식 예&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;노드 선택&lt;/td&gt;
      &lt;td&gt;&lt;code&gt;/root/node/node/node&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;노드 바로 선택&lt;/td&gt;
      &lt;td&gt;&lt;code&gt;//node&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;n번째 노드 선택&lt;/td&gt;
      &lt;td&gt;&lt;code&gt;/root/node[n]&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;속성 선택&lt;/td&gt;
      &lt;td&gt;&lt;code&gt;/root/node/@attribute&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;텍스트 읽기&lt;/td&gt;
      &lt;td&gt;&lt;code&gt;/root/node/text()&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;노드 수 세기&lt;/td&gt;
      &lt;td&gt;&lt;code&gt;count(/root/node)&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;section-3&quot;&gt;예제&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;breakfast_menu&amp;gt;
  &amp;lt;food&amp;gt;
    &amp;lt;name&amp;gt;Belgian Waffles&amp;lt;/name&amp;gt;
    &amp;lt;price&amp;gt;$5.95&amp;lt;/price&amp;gt;
    &amp;lt;description&amp;gt;Two of our famous Belgian Waffles with plenty of real maple
        syrup&amp;lt;/description&amp;gt;
    &amp;lt;calories&amp;gt;650&amp;lt;/calories&amp;gt;
  &amp;lt;/food&amp;gt;
  &amp;lt;food&amp;gt;
    &amp;lt;name&amp;gt;Strawberry Belgian Waffles&amp;lt;/name&amp;gt;
    &amp;lt;price&amp;gt;$7.95&amp;lt;/price&amp;gt;
    &amp;lt;description&amp;gt;Light Belgian waffles covered with strawberries and whipped
        cream&amp;lt;/description&amp;gt;
    &amp;lt;calories&amp;gt;900&amp;lt;/calories&amp;gt;
  &amp;lt;/food&amp;gt;
  &amp;lt;food&amp;gt;
    &amp;lt;name&amp;gt;Berry-Berry Belgian Waffles&amp;lt;/name&amp;gt;
    &amp;lt;price&amp;gt;$8.95&amp;lt;/price&amp;gt;
    &amp;lt;description&amp;gt;Light Belgian waffles covered with an assortment of fresh
        berries and whipped cream&amp;lt;/description&amp;gt;
    &amp;lt;calories&amp;gt;900&amp;lt;/calories&amp;gt;
  &amp;lt;/food&amp;gt;
  &amp;lt;!-- 중략 --&amp;gt;
&amp;lt;/breakfast_menu&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;위 문서는 w3schools.com에 올라와 있는 XML 예제다.(&lt;a href=&quot;http://www.w3schools.com/xml/simple.xml&quot;&gt;출처&lt;/a&gt;) xmllint를 써보기 위해 문서를 다운로드한다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ curl http://www.w3schools.com/xml/simple.xml &amp;gt; simple.xml
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;다음은 이 문서에서 노드와 데이터를 읽기 위한 XPath 표현식이다.&lt;/p&gt;

&lt;p&gt;모든 food 태그 선택: &lt;code&gt;/breakfast_menu/food&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ xmllint --xpath &#39;/breakfast_menu/food&#39; simple.xml
&amp;lt;food&amp;gt;
  &amp;lt;name&amp;gt;Belgian Waffles&amp;lt;/name&amp;gt;
  &amp;lt;price&amp;gt;$5.95&amp;lt;/price&amp;gt;
  &amp;lt;description&amp;gt;Two of our famous Belgian Waffles with plenty of real maple
      syrup&amp;lt;/description&amp;gt;
  &amp;lt;calories&amp;gt;650&amp;lt;/calories&amp;gt;
&amp;lt;/food&amp;gt;
&amp;lt;food&amp;gt;
  &amp;lt;name&amp;gt;Strawberry Belgian Waffles&amp;lt;/name&amp;gt;
(중략)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;첫번째 food 태그 선택: &lt;code&gt;/breakfast_menu/food[1]&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ xmllint --xpath &#39;/breakfast_menu/food[1]&#39; simple.xml
&amp;lt;food&amp;gt;
  &amp;lt;name&amp;gt;Belgian Waffles&amp;lt;/name&amp;gt;
  &amp;lt;price&amp;gt;$5.95&amp;lt;/price&amp;gt;
  &amp;lt;description&amp;gt;Two of our famous Belgian Waffles with plenty of real maple
      syrup&amp;lt;/description&amp;gt;
  &amp;lt;calories&amp;gt;650&amp;lt;/calories&amp;gt;
&amp;lt;/food&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;첫번째 food/price 태그의 텍스트 읽기: &lt;code&gt;/breakfast_menu/food[1]/price/text()&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ xmllint --xpath &#39;/breakfast_menu/food[1]/price/text()&#39; simple.xml
5.95$
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;food 태그가 몇 개인지 세기: &lt;code&gt;count(/breakfast_menu/food)&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ xmllint --xpath &#39;count(/breakfast_menu/food)&#39; simple.xml
5
&lt;/code&gt;&lt;/pre&gt;

</description>
        <author>박연오(bakyeono@gmail.com)</author>
        <pubDate>Mon, 01 Jun 2015 10:10:00 +0900</pubDate>
        <link>http://bakyeono.net/post/2015-06-01-parse-xml-with-xmllint.html</link>
        <guid isPermaLink="true">http://bakyeono.net/post/2015-06-01-parse-xml-with-xmllint.html</guid>
        
        <category>xml</category>
        
        <category>xmllint</category>
        
        <category>xpath</category>
        
        <category>linux</category>
        
        <category>bash</category>
        
        
      </item>
    
  </channel>
</rss>
