<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>박연오</title>
    <description>Workers of the world, unite!</description>
    <link>http://bakyeono.net/</link>
    <atom:link href="http://bakyeono.net/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Tue, 12 May 2015 21:25:11 +0900</pubDate>
    <lastBuildDate>Tue, 12 May 2015 21:25:11 +0900</lastBuildDate>
    <generator>Jekyll v2.5.3</generator>
    
      <item>
        <title>ncurses 라이브러리에서 한글(utf-8) 출력하기</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#ncurses----&quot; id=&quot;markdown-toc-ncurses----&quot;&gt;ncurses 라이브러리에서 한글이 깨질 때&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#section&quot; id=&quot;markdown-toc-section&quot;&gt;유니코드를 지원하는 버전&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#section-1&quot; id=&quot;markdown-toc-section-1&quot;&gt;설치&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#section-2&quot; id=&quot;markdown-toc-section-2&quot;&gt;헤더 인클루드&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#section-3&quot; id=&quot;markdown-toc-section-3&quot;&gt;링크&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ncurses----&quot;&gt;ncurses 라이브러리에서 한글이 깨질 때&lt;/h2&gt;

&lt;p&gt;ncurses 라이브러리를 쓸 때, 로케일 설정을 올바로 했는데도 한글이 깨지는 문제가 있다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#include &amp;lt;locale.h&amp;gt;
#include &amp;lt;curses.h&amp;gt;

int main() {
  setlocale(LC_CTYPE, &quot;ko_KR.utf-8&quot;); /* 로케일 설정을 했는데도 */
  initscr();
  printw(&quot;%s&quot;, &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ\n&quot;);
  printw(&quot;%s&quot;, &quot;가나다라마바사아자차카타파하\n&quot;);
  refresh();
  sleep(1);
  endwin();
  return 0;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;이 코드를 컴파일해 실행하면 한글이 깨져서 출력된다. ncurses 라이브러리가 유니코드를 지원하지 않기 떄문이다.&lt;/p&gt;

&lt;h2 id=&quot;section&quot;&gt;유니코드를 지원하는 버전&lt;/h2&gt;

&lt;p&gt;ncurses 라이브러리 배포판 중에 데비안 패키지인 &lt;code&gt;libncurses5-dev&lt;/code&gt;는 유니코드를 지원하지 않는다. 한글을 제대로 출력하려면 유니코드를 지원하는 버전인 &lt;code&gt;libncursesw5-dev&lt;/code&gt;를 사용해야 한다.&lt;/p&gt;

&lt;h3 id=&quot;section-1&quot;&gt;설치&lt;/h3&gt;

&lt;p&gt;데비안 기반 배포판인 경우 아래와 같이 설치한다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apt-get install libncursesw5-dev
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;section-2&quot;&gt;헤더 인클루드&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;ncurses.h&lt;/code&gt; 대신 &lt;code&gt;ncursesw/curses.h&lt;/code&gt;를 인클루드해야 한다. 위 예제 코드의 경우 두 번째 줄을 아래와 같이 고친다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#include &amp;lt;ncursesw/curses.h&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;section-3&quot;&gt;링크&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;-lncurses&lt;/code&gt; 대신 &lt;code&gt;-lncursesw&lt;/code&gt; 옵션으로 링크하면 된다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$gcc SOURCE.c -o APP -lncursesw
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;결과물을 실행해 보면 이제 ncurses에서 한글이 잘 출력된다는 것을 알 수 있다.&lt;/p&gt;

</description>
        <author>박연오(bakyeono@gmail.com)</author>
        <pubDate>Tue, 12 May 2015 21:12:00 +0900</pubDate>
        <link>http://bakyeono.net/post/2015-05-12-ncurses-korean-utf-8.html</link>
        <guid isPermaLink="true">http://bakyeono.net/post/2015-05-12-ncurses-korean-utf-8.html</guid>
        
        <category>c</category>
        
        <category>리눅스</category>
        
        <category>유니코드</category>
        
        <category>한글</category>
        
        
      </item>
    
  </channel>
</rss>
